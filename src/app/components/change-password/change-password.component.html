<span mat-dialog-title>Change Password</span>
<mat-dialog-content class="dialog-content">
    <form [formGroup]="form">
        <div class="form-container">
            <mat-form-field>
                <mat-label>Actual Password</mat-label>
                <input
                    name="actualPassword"
                    id="actualPassword"
                    type="{{ showActualPassword ? 'text' : 'password' }}"
                    matInput
                    placeholder="Actual Password"
                    formControlName="actualPassword"
                    required
                />
                <button
                    mat-icon-button
                    matSuffix
                    type="button"
                    (click)="togglePasswordVisibility('actualPassword')"
                >
                    <mat-icon>{{ showActualPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
                </button>
                <mat-error *ngIf="form.get('actualPassword')?.hasError('required')">
                    Actual Password is required
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>New Password</mat-label>
                <input
                    name="newPassword"
                    id="newPassword"
                    type="{{ showNewPassword ? 'text' : 'password' }}"
                    matInput
                    placeholder="New Password"
                    formControlName="newPassword"
                    required
                />
                <button
                    mat-icon-button
                    matSuffix
                    type="button"
                    (click)="togglePasswordVisibility('newPassword')"
                >
                    <mat-icon>{{ showNewPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
                </button>
                <mat-error *ngIf="form.get('newPassword')?.hasError('required')">
                    New Password is required
                </mat-error>
                <mat-error *ngIf="form.get('newPassword')?.errors">
                    {{ getErrorMessage(form.get('newPassword')?.errors) }}
                </mat-error>
            </mat-form-field>
            <mat-form-field>
                <mat-label>Confirm Password</mat-label>
                <input
                    name="confirmPassword"
                    id="confirmPassword"
                    type="{{ showConfirmPassword ? 'text' : 'password' }}"
                    matInput
                    placeholder="Confirm Password"
                    formControlName="confirmPassword"
                    required
                />
                <button
                    mat-icon-button
                    matSuffix
                    type="button"
                    (click)="togglePasswordVisibility('confirmPassword')"
                >
                    <mat-icon>{{ showConfirmPassword ? 'visibility' : 'visibility_off' }}</mat-icon>
                </button>
                <mat-error *ngIf="form.get('confirmPassword')?.hasError('required')">
                    Confirm Password is required
                </mat-error>
                <mat-error *ngIf="form.get('confirmPassword')?.errors">
                    {{ getErrorMessage(form.get('confirmPassword')?.errors) }}
                </mat-error>
            </mat-form-field>
        </div>
        <app-password-strength [form]="form"></app-password-strength>
    </form>
</mat-dialog-content>

<mat-dialog-actions [align]="'end'">
    <button type="button" mat-stroked-button color="warn" mat-dialog-close>Cancel</button>
    <button
        type="submit"
        mat-raised-button
        color="primary"
        [disabled]="!form.valid"
        (click)="changeUserPassword()"
    >
        Save
    </button>
</mat-dialog-actions>
